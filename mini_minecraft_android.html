<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Minecraft Mobile – FIXED</title>
<style>
body{margin:0;overflow:hidden;background:#87ceeb;touch-action:none;font-family:sans-serif}
canvas{width:100vw;height:100vh;display:block}
#ui-layer{position:absolute;inset:0;pointer-events:none}
.touch-btn,.action-btn{pointer-events:auto;color:#fff;font-weight:bold;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,.4);border:2px solid rgba(255,255,255,.5);border-radius:8px}
.touch-btn{position:absolute;width:60px;height:60px}
#btn-up{bottom:140px;left:80px}
#btn-down{bottom:20px;left:80px}
#btn-left{bottom:80px;left:10px}
#btn-right{bottom:80px;left:150px}
.action-btn{position:absolute;width:70px;height:70px;border-radius:50%}
#btn-jump{bottom:20px;right:110px}
#btn-build{bottom:100px;right:20px;background:rgba(76,175,80,.7)}
#btn-destroy{bottom:20px;right:20px;background:rgba(244,67,54,.7)}
#inventory{position:absolute;top:10px;left:50%;transform:translateX(-50%);display:flex;gap:5px;background:rgba(0,0,0,.5);padding:5px;border-radius:8px;pointer-events:auto}
.slot{width:35px;height:35px;border:2px solid #444;background-size:cover}
.slot.active{border-color:#fff;box-shadow:0 0 8px #fff}
#crosshair{position:absolute;top:50%;left:50%;width:10px;height:10px;border:2px solid #fff;border-radius:50%;transform:translate(-50%,-50%)}
#fs-btn{position:absolute;top:10px;right:10px;padding:10px;background:#000;color:#fff;pointer-events:auto;border-radius:5px;font-size:12px}
</style>
</head>
<body>
<div id="ui-layer">
<div id="fs-btn" onclick="document.documentElement.requestFullscreen()">FULLSCREEN</div>
<div id="crosshair"></div>
<div id="inventory">
<div class="slot active" onclick="setBlock(1, event)" style="background-color:#5d8233"></div>
<div class="slot" onclick="setBlock(2, event)" style="background-color:#795548"></div>
<div class="slot" onclick="setBlock(3, event)" style="background-color:#808080"></div>
<div class="slot" onclick="setBlock(4, event)" style="background-color:#6d4c41"></div>
<div class="slot" onclick="setBlock(6, event)" style="background-color:#2e7d32"></div>
</div>
<div class="touch-btn" id="btn-up">▲</div>
<div class="touch-btn" id="btn-down">▼</div>
<div class="touch-btn" id="btn-left">◀</div>
<div class="touch-btn" id="btn-right">▶</div>
<div class="action-btn" id="btn-jump">JMP</div>
<div class="action-btn" id="btn-build">PUT</div>
<div class="action-btn" id="btn-destroy">DEL</div>
</div>

<script type="importmap">
{"imports":{"three":"https://unpkg.com/three@0.160.0/build/three.module.js"}}
</script>

<script type="module">
import * as THREE from "three";

let scene, camera, renderer, yaw, pitch, raycaster;
let move = {f:0, b:0, l:0, r:0};
let vel = new THREE.Vector3();
let canJump = false;
let blocks = [];
let selected = 1;

function makeTex(color) {
    const c = document.createElement("canvas"); c.width = c.height = 16;
    const g = c.getContext("2d");
    g.fillStyle = color; g.fillRect(0,0,16,16);
    for(let i=0; i<30; i++) { g.fillStyle = "rgba(0,0,0,0.15)"; g.fillRect(Math.random()*16, Math.random()*16, 1, 1); }
    const t = new THREE.CanvasTexture(c);
    t.magFilter = t.minFilter = THREE.NearestFilter;
    return t;
}

const TEX = { 1:makeTex("#5d8233"), 2:makeTex("#795548"), 3:makeTex("#808080"), 4:makeTex("#6d4c41"), 5:makeTex("#1e88e5"), 6:makeTex("#2e7d32") };

init(); loop();

function init() {
    scene = new THREE.Scene();
    scene.background = new THREE.Color(0x87ceeb);
    camera = new THREE.










